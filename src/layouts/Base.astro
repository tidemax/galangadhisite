---
import "../styles/global.css";
import { profile } from "../data/site";
const {
  title = profile.name,
  description = profile.summary,
  active = "home",
} = Astro.props;

const iconSvg = (label: string) => {
  const icons: Record<string, string> = {
    Email:
      '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 5h18a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1m0 2v.5l9 6 9-6V7H3m18 11V9.9l-8.4 5.6a1 1 0 0 1-1.2 0L3 9.9V18h18Z"/></svg>',
    Behance:
      '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M9.7 11.4c.9-.4 1.4-1.1 1.4-2.2 0-2-1.6-3.2-3.8-3.2H2v12h5.3c2.8 0 4.3-1.5 4.3-3.8 0-1.5-.7-2.3-1.9-2.8ZM5 8.3h2c.9 0 1.4.4 1.4 1.1 0 .8-.5 1.2-1.4 1.2H5V8.3Zm2.3 7.4H5v-2.9h2.4c1.1 0 1.7.5 1.7 1.4 0 1-.6 1.5-1.8 1.5Zm7.3-7.7h5.5V6.7h-5.5V8Zm3 1.2c-3 0-4.9 1.9-4.9 4.8 0 2.8 1.8 4.7 4.8 4.7 2.2 0 3.8-1 4.4-2.8h-2.4c-.3.6-1 1-1.9 1-1.3 0-2.1-.7-2.2-2h6.7v-.7c0-3-1.7-5-4.5-5Zm-2.1 3.9c.2-1.2.9-1.9 2-1.9s1.8.7 1.9 1.9h-3.9Z"/></svg>',
    LinkedIn:
      '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M6.94 8.5A1.56 1.56 0 1 1 6.95 5.4a1.56 1.56 0 0 1-.01 3.1ZM5.5 9.6h2.9V19H5.5V9.6Zm4.7 0h2.8v1.3h.04c.39-.74 1.35-1.52 2.78-1.52 2.98 0 3.53 1.96 3.53 4.5V19h-2.9v-4.5c0-1.08-.02-2.47-1.5-2.47-1.5 0-1.73 1.17-1.73 2.39V19H10.2V9.6Z"/></svg>',
    Instagram:
      '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9a5.5 5.5 0 0 1-5.5 5.5h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2m0 2A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4h-9m9.75 1.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5M12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10m0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/></svg>',
    Linktree:
      '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 1.6 8.6 5h2.6v3H8l-2 2h5.2v3H5l-1.9 1.9 1.4 1.4L7 14.7V20h10v-5.3l2.5 2.6 1.4-1.4L19 14h-6.2v-3H18l-2-2h-3.2V5h2.6L12 1.6Z"/></svg>',
    Bento:
      '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 4h7v7H4V4m9 0h7v3h-7V4m0 5h7v11h-7V9M4 13h7v7H4v-7Z"/></svg>',
  };
  return icons[label] ?? '<svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" fill="currentColor"/></svg>';
};
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <script is:inline>
      try {
        const saved = localStorage.getItem("theme");
        if (saved === "dark" || saved === "light") {
          document.documentElement.dataset.theme = saved;
        }
      } catch {}
    </script>
  </head>
  <body>
    <main>
      <div class="container">
        <section class="profile-block">
          <div class="avatar-wrap">
            <img class="avatar" src="/avatar.svg" alt={`${profile.name} photo`} />
            <button class="theme-toggle" type="button" data-theme-toggle>
              Theme
            </button>
          </div>
          <p class="eyebrow">{profile.pronouns} Â· {profile.location}</p>
          <h1>Hey, I'm {profile.name}.</h1>
          <p class="lead">{profile.summary}</p>
          <nav class="pill-nav">
            <a class:list={["pill", active === "home" && "active"]} href="/">Home</a>
            <a class:list={["pill", active === "about" && "active"]} href="/about">About</a>
            <a class:list={["pill", active === "cv" && "active"]} href="/cv">CV</a>
            <a class:list={["pill", active === "archive" && "active"]} href="/archive">Archive</a>
          </nav>
        </section>
        <slot />
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div>
          <p class="footer-title">Connect</p>
          <p class="footer-copy">Open to collaborations and design systems.</p>
        </div>
        <div class="footer-links">
          {profile.links.map((link) => (
            <a
              class="social-link"
              href={link.href}
              target="_blank"
              rel="noreferrer"
              aria-label={link.label}
              title={link.label}
            >
              <span class="icon" set:html={iconSvg(link.label)} />
            </a>
          ))}
        </div>
      </div>
    </footer>
    <script is:inline>
      const toggle = document.querySelector("[data-theme-toggle]");
      const root = document.documentElement;
      const updateLabel = () => {
        const isDark = root.dataset.theme === "dark";
        if (toggle) toggle.textContent = isDark ? "Light" : "Dark";
      };
      updateLabel();
      toggle?.addEventListener("click", () => {
        const next = root.dataset.theme === "dark" ? "light" : "dark";
        root.dataset.theme = next;
        try {
          localStorage.setItem("theme", next);
        } catch {}
        updateLabel();
      });
    </script>
  </body>
</html>

<style>
  .profile-block {
    padding: 20px 0 6px;
    max-width: 720px;
  }

  .avatar-wrap {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
  }

  .avatar {
    width: 56px;
    height: 56px;
    border-radius: 999px;
    object-fit: cover;
    background: var(--surface);
  }

  .theme-toggle {
    border: none;
    background: var(--pill-bg);
    color: var(--pill-ink);
    border-radius: 999px;
    padding: 6px 12px;
    font: inherit;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    cursor: pointer;
  }

  .theme-toggle:hover {
    background: var(--pill-bg-hover);
    color: var(--ink);
  }

  .lead {
    max-width: 62ch;
    margin: 6px 0 0;
    color: var(--muted);
  }

  h1 {
    margin: 6px 0 0;
    font-size: inherit;
    font-weight: 600;
  }

  .pill-nav {
    display: flex;
    gap: 10px;
    margin-top: 14px;
    flex-wrap: wrap;
  }

  .pill {
    padding: 6px 14px;
    border-radius: 999px;
    font-size: 12px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    background: var(--pill-bg);
    color: var(--pill-ink);
    transition: background 0.15s ease, color 0.15s ease;
  }

  .pill:hover {
    background: var(--pill-bg-hover);
    color: var(--ink);
  }

  .pill.active {
    background: var(--pill-active-bg);
    color: var(--pill-active-ink);
  }

  .site-footer {
    padding: 28px 0 48px;
  }

  .footer-inner {
    display: flex;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
    max-width: 720px;
  }

  .footer-title {
    margin: 0 0 8px;
    font-size: 16px;
    font-weight: 500;
  }

  .footer-copy {
    margin: 0;
    color: var(--muted);
  }

  .footer-links {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .social-link {
    width: 36px;
    height: 36px;
    border-radius: 999px;
    background: var(--pill-bg);
    color: var(--pill-ink);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background 0.15s ease, color 0.15s ease;
  }

  .social-link:hover {
    background: var(--pill-bg-hover);
    color: var(--ink);
  }

  .icon :global(svg) {
    width: 18px;
    height: 18px;
  }

  @media (max-width: 700px) {
    .pill-nav {
      gap: 8px;
    }
  }
</style>
